!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(()=>(()=>{"use strict";var t={462:(t,e,n)=>{n.d(e,{A:()=>h});var o=n(4848),i=n(959);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function c(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,null,[{key:"element",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=document.createElement(t);Array.isArray(n)?(e=s.classList).add.apply(e,r(n)):n&&s.classList.add(n);for(var a in o)s.setAttribute(a,o[a]);return""!==i&&(s.innerHTML=i),s}},{key:"input",value:function(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=t.element("div",n,{contentEditable:!e.readOnly});return s.dataset.placeholder=e.api.i18n.t(o),i&&(s.textContent=i),s}},{key:"option",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=document.createElement("option");for(var s in i.text=n||e,i.value=e,o)i.setAttribute(s,o[s]);t.add(i)}},{key:"options",value:function(e,n){n.forEach((function(n){return t.option(e,n)}))}},{key:"fileButtons",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=t.element("div",["flex","cdx-input-labeled-preview","cdx-input-labeled","cdx-input","cdx-input-editable"].concat(r(n))),a=t.element("div",[e.api.styles.button]);if(a.innerHTML=o.A+" "+e.api.i18n.t("Select"),a.addEventListener("click",(function(t){return e.onSelectFile(e,t)})),s.appendChild(a),e.onUploadFile){var l=t.element("div",[e.api.styles.button]);l.innerHTML="".concat(i.A," ").concat(e.api.i18n.t("Upload")),l.style.marginLeft="-2px",l.addEventListener("click",(function(t){return e.onUploadFile(e,t)})),s.appendChild(l)}return s}},{key:"switchInput",value:function(e,n){var o=t.element("div","editor-switch"),i=t.element("input",null,{type:"checkbox",id:e}),s=t.element("label","label-default",{for:e}),r=t.element("label","",{for:e});return r.innerHTML=n,o.append(i,s,r),o}},{key:"selectionCollapseToEnd",value:function(){var t=window.getSelection(),e=document.createRange();e.selectNodeContents(t.focusNode),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}}])}()},9110:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(1601),i=n.n(o),s=n(6314),r=n.n(s)()(i());r.push([t.id,".link-options-wrapper {\n  outline: none;\n  border: 0;\n  border-radius: 0 0 4px 4px;\n  margin: 0;\n  font-size: 13px;\n  padding: 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  font-weight: 500;\n  border-top: 1px solid rgba(201, 201, 204, 0.48);\n}\n\n.ninja {\n  text-decoration: none !important;\n  color: inherit !important;\n  border-bottom: 1px dotted #333;\n}\n\n.link-btn {\n  padding: 6px 12px;\n  margin-bottom: 0;\n  border-radius: 3px;\n  border: 1px solid transparent;\n  cursor: pointer;\n  color: #fff;\n  background-color: #3c8dbc;\n  border-color: #367fa9;\n  outline: none;\n  text-decoration: none !important;\n}\n\n.link-btn:hover {\n  color: #fff !important;\n}\n\n.editor-switch {\n  padding-left: 4px;\n  padding-right: 10px;\n  margin-bottom: 10px;\n  margin-top: 5px;\n}\n\n.editor-switch > input[type='checkbox'] {\n  display: none;\n}\n\n.editor-switch label {\n  font-weight: normal;\n}\n.editor-switch > .label-default {\n  cursor: pointer;\n  height: 0px;\n  position: relative;\n  width: 30px;\n}\n\n.editor-switch > .label-default::before {\n  background: rgb(0, 0, 0);\n  box-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\n  border-radius: 8px;\n  content: '';\n  height: 12px;\n  margin-top: -5px;\n  position: absolute;\n  opacity: 0.3;\n  transition: all 0.4s ease-in-out;\n  width: 20px;\n}\n.editor-switch > .label-default::after {\n  background: rgb(255, 255, 255);\n  border-radius: 16px;\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\n  content: '';\n  height: 16px;\n  left: -4px;\n  position: absolute;\n  top: -7px;\n  transition: all 0.3s ease-in-out;\n  width: 16px;\n}\n.editor-switch > input[type='checkbox']:checked + .label-default::before {\n  background: inherit;\n  opacity: 0.5;\n}\n.editor-switch > input[type='checkbox']:checked + .label-default::after {\n  background: inherit;\n  left: 10px;\n}\n\n.plugin-option-input {\n  border: 1px solid rgba(201, 201, 204, 0.48);\n  box-shadow: inset 0 1px 2px 0 rgb(35 44 72 / 6%);\n  border-radius: 5px;\n  padding: 5px 8px;\n  margin-bottom: 10px;\n  outline: none;\n  width: 100%;\n  box-sizing: border-box;\n  background: #fff;\n}\n\n.ce-popover__container {\n  min-width: 235px !important;\n}\n",""]);const a=r},6314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);o&&r[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},1601:t=>{t.exports=function(t){return t[1]}},4848:(t,e,n)=>{n.d(e,{A:()=>o});const o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">  <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/></svg>\n'},959:(t,e,n)=>{n.d(e,{A:()=>o});const o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>  <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg>\n'},5072:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var s={},r=[],a=0;a<t.length;a++){var l=t[a],c=o.base?l[0]+o.base:l[0],h=s[c]||0,d="".concat(c," ").concat(h);s[c]=h+1;var u=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var f=i(p,o);o.byIndex=a,e.splice(a,0,{identifier:d,updater:f,references:1})}r.push(d)}return r}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=o(t=t||[],i=i||{});return function(t){t=t||[];for(var r=0;r<s.length;r++){var a=n(s[r]);e[a].references--}for(var l=o(t,i),c=0;c<s.length;c++){var h=n(s[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}s=l}}},7659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5056:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={id:o,exports:{}};return t[o](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var o={};n.d(o,{default:()=>Xe});var i=n(5072),s=n.n(i),r=n(7825),a=n.n(r),l=n(7659),c=n.n(l),h=n(5056),d=n.n(h),u=n(540),p=n.n(u),f=n(1113),g=n.n(f),m=n(9110),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=p();s()(m.A,v);m.A&&m.A.locals&&m.A.locals;class b{instance=null;selection=null;savedSelectionRange=null;isFakeBackgroundEnabled=!1;commandBackground="backColor";commandRemoveFormat="removeFormat";static get range(){const t=window.getSelection();return t&&t.rangeCount?t.getRangeAt(0):null}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=b.range}restore(){if(!this.savedSelectionRange)return;const t=window.getSelection();t.removeAllRanges(),t.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const t=window.getSelection(),e=document.createRange();e.selectNodeContents(t.focusNode),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}findParentTag(t,e,n=10){const o=window.getSelection();let i=null;if(!o||!o.anchorNode||!o.focusNode)return null;return[o.anchorNode,o.focusNode].forEach((o=>{let s=n;for(;s>0&&o.parentNode&&(o.tagName!==t||(i=o,e&&o.classList&&!o.classList.contains(e)&&(i=null),!i));)o=o.parentNode,s--})),i}}var y=n(462);const w='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>';var k={LocalMulti:function(){},Key:{TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},copyProperties:function(t,e){for(var n in e)t[n]=e[n];return t},Local:function(){this.initialize.apply(this,arguments)}};k.Local.prototype={initialize:function(t,e,n){this.input=this._getElement(t),this.suggestArea=this._getElement(e),this.candidateList=n,this.oldText=this.getInputText(),arguments[3]&&this.setOptions(arguments[3]),this._addEvent(this.input,"focus",this._bind(this.checkLoop)),this._addEvent(this.input,"blur",this._bind(this.inputBlur)),this._addEvent(this.suggestArea,"blur",this._bind(this.inputBlur)),this._addEvent(this.input,"keydown",this._bindEvent(this.keyEvent)),this.clearSuggestArea()},interval:500,dispMax:20,listTagName:"div",prefix:!1,ignoreCase:!0,highlight:!1,dispAllKey:!1,classMouseOver:"over",classSelect:"select",delim:" ",hookBeforeSearch:null,hookSearchResults:null,setOptions:function(t){k.copyProperties(this,t)},inputBlur:function(){setTimeout(this._bind((function(){document.activeElement!=this.suggestArea&&document.activeElement!=this.input&&(this.changeUnactive(),this.oldText=this.getInputText(),this.timerId&&clearTimeout(this.timerId),this.timerId=null,setTimeout(this._bind(this.clearSuggestArea),500))}),500))},checkLoop:function(){var t=this.getInputText();t!=this.oldText&&(this.oldText=t,this.search()),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)},search:function(){this.clearSuggestArea();var t=this.getInputText();if(""!=t&&null!=t){this.hookBeforeSearch&&this.hookBeforeSearch(k,t);var e=this._search(t);this.hookSearchResults&&(e=window[this.hookSearchResults](this,this.getInputValue(),t,e)),0!=e.length&&this.createSuggestArea(e)}},_search:function(t){var e,n=[];this.suggestIndexList=[];for(var o=0,i=this.candidateList.length;o<i;o++)if(null!=(e=this.isMatch(this.candidateList[o],t))){if(this.getInputValue().includes(e.replace(/(<([^>]+)>)/gi,"")))continue;if(n.push(e),this.suggestIndexList.push(o),0!=this.dispMax&&n.length>=this.dispMax)break}return n},isMatch:function(t,e){if(null==t)return null;var n=this.ignoreCase?t.toLowerCase().indexOf(e.toLowerCase()):t.indexOf(e);return-1==n||this.prefix&&0!=n?null:this.highlight?this._escapeHTML(t.substr(0,n))+"<strong>"+this._escapeHTML(t.substr(n,e.length))+"</strong>"+this._escapeHTML(t.substr(n+e.length)):this._escapeHTML(t)},clearSuggestArea:function(){this.suggestArea.innerHTML="",this.suggestArea.style.display="none",this.suggestList=null,this.suggestIndexList=null,this.activePosition=null},createSuggestArea:function(t){this.suggestList=[],this.inputValueBackup=this.getInputValue();for(var e=0,n=t.length;e<n;e++){var o=document.createElement(this.listTagName);o.innerHTML=t[e],this.suggestArea.appendChild(o),this._addEvent(o,"click",this._bindEvent(this.listClick,e)),this._addEvent(o,"mouseover",this._bindEvent(this.listMouseOver,e)),this._addEvent(o,"mouseout",this._bindEvent(this.listMouseOut,e)),this.suggestList.push(o)}this.suggestArea.style.display="",this.suggestArea.scrollTop=0},getInputValue:function(){return this.input instanceof HTMLInputElement?this.input.value:this.input.innerText},getInputText:function(){return this.getInputValue()},setInputValue:function(t){this.input instanceof HTMLInputElement?this.input.value=t:this.input.innerText=t},setInputText:function(t){this.setInputValue(t)},keyEvent:function(t){this.timerId||(this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)),this.dispAllKey&&t.ctrlKey&&""==this.getInputText()&&!this.suggestList&&t.keyCode==k.Key.DOWN?(this._stopEvent(t),this.keyEventDispAll()):t.keyCode==k.Key.UP||t.keyCode==k.Key.DOWN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(t),this.keyEventMove(t.keyCode)):t.keyCode==k.Key.RETURN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(t),this.keyEventReturn()):t.keyCode==k.Key.ESC?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(t),this.keyEventEsc()):this.keyEventOther(t)},keyEventDispAll:function(){this.clearSuggestArea(),this.oldText=this.getInputText(),this.suggestIndexList=[];for(var t=0,e=this.candidateList.length;t<e;t++)this.suggestIndexList.push(t);this.createSuggestArea(this.candidateList)},keyEventMove:function(t){if(this.changeUnactive(),t==k.Key.UP){if(null==this.activePosition)this.activePosition=this.suggestList.length-1;else if(this.activePosition--,this.activePosition<0)return this.activePosition=null,this.setInputValue(this.inputValueBackup),void(this.suggestArea.scrollTop=0)}else if(null==this.activePosition?this.activePosition=0:this.activePosition++,this.activePosition>=this.suggestList.length)return this.activePosition=null,this.setInputValue(this.inputValueBackup),void(this.suggestArea.scrollTop=0);this.changeActive(this.activePosition)},keyEventReturn:function(){this.clearSuggestArea(),this.moveEnd()},keyEventEsc:function(){this.clearSuggestArea(),this.setInputValue(this.inputValueBackup),this.oldText=this.getInputText(),window.opera&&setTimeout(this._bind(this.moveEnd),5)},keyEventOther:function(t){},changeActive:function(t){this.setStyleActive(this.suggestList[t]),this.setInputText(this.candidateList[this.suggestIndexList[t]]),this.oldText=this.getInputText(),this.input.focus()},changeUnactive:function(){null!=this.suggestList&&this.suggestList.length>0&&null!=this.activePosition&&this.setStyleUnactive(this.suggestList[this.activePosition])},listClick:function(t,e){this.changeUnactive(),this.activePosition=e,this.changeActive(e),this.clearSuggestArea(),this.moveEnd()},listMouseOver:function(t,e){this.setStyleMouseOver(this._getEventElement(t))},listMouseOut:function(t,e){if(this.suggestList){var n=this._getEventElement(t);e==this.activePosition?this.setStyleActive(n):this.setStyleUnactive(n)}},setStyleActive:function(t){t.className=this.classSelect;var e=t.offsetTop,n=e+t.clientHeight;this.suggestArea.scrollTop>e?this.suggestArea.scrollTop=e:this.suggestArea.scrollTop+this.suggestArea.clientHeight<n&&(this.suggestArea.scrollTop=n-this.suggestArea.clientHeight)},setStyleUnactive:function(t){t.className=""},setStyleMouseOver:function(t){t.className=this.classMouseOver},moveEnd:function(){if(this.input.createTextRange)this.input.focus(),(t=this.input.createTextRange()).move("character",this.getInputValue().length),t.select();else if(this.input.setSelectionRange)this.input.setSelectionRange(this.getInputValue().length,this.getInputValue().length);else{var t;this.input.focus(),(t=document.createRange()).selectNodeContents(this.input),t.collapse(!1);var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}},_getElement:function(t){return"string"==typeof t?document.getElementById(t):t},_addEvent:window.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)},_stopEvent:function(t){t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0)},_getEventElement:function(t){return t.target||t.srcElement},_bind:function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){t.apply(e,n)}},_bindEvent:function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(o){o=o||window.event,t.apply(e,[o].concat(n))}},_escapeHTML:function(t){return t.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}},k.LocalMulti=function(){this.initialize.apply(this,arguments)},k.copyProperties(k.LocalMulti.prototype,k.Local.prototype),k.LocalMulti.prototype.keyEventReturn=function(){this.clearSuggestArea(),this.setInputValue(this.getInputValue()+this.delim),this.moveEnd()},k.LocalMulti.prototype.keyEventOther=function(t){t.keyCode==k.Key.TAB&&this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(t),this.activePosition||(this.activePosition=0,this.changeActive(this.activePosition)),this.clearSuggestArea(),this.setInputValue(this.getInputValue()+this.delim),window.opera?setTimeout(this._bind(this.moveEnd),5):this.moveEnd())},k.LocalMulti.prototype.listClick=function(t,e){this.changeUnactive(),this.activePosition=e,this.changeActive(e),this.setInputValue(this.getInputValue()+this.delim),this.clearSuggestArea(),this.moveEnd()},k.LocalMulti.prototype.getInputText=function(){var t=this.getLastTokenPos();return-1==t?this.getInputValue():this.getInputValue().substr(t+this.delim.length)},k.LocalMulti.prototype.setInputText=function(t){var e=this.getLastTokenPos();-1==e?this.setInputValue(t):this.setInputValue(this.getInputValue().substr(0,e+this.delim.length)+t)},k.LocalMulti.prototype.getLastTokenPos=function(){return this.getInputValue().lastIndexOf(this.delim)},function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(t)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x(){}Object.assign(x,{default:x,register:x,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){const e=(this.document||this.ownerDocument).querySelectorAll(t);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1}),Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(t){const e=document.createDocumentFragment();Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=t instanceof Node;e.appendChild(n?t:document.createTextNode(t))})),this.insertBefore(e,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=0===arguments.length||!!t;const e=this.parentNode,n=window.getComputedStyle(e,null),o=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),s=this.offsetTop-e.offsetTop<e.scrollTop,r=this.offsetTop-e.offsetTop+this.clientHeight-o>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,c=s&&!r;(s||r)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-o+this.clientHeight/2),(a||l)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(s||r||a||l)&&!t&&this.scrollIntoView(c)}),window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)};const T=9,E=13,L=37,S=38,A=40,I=39;function B(t,e,n="log",o,i="color: inherit"){if(!("console"in window)||!window.console[n])return;const s=["info","log","warn","error"].includes(n),r=[];switch(B.logLevel){case"ERROR":if("error"!==n)return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!s||t)return}o&&r.push(o);const a="Editor.js 2.30.7";t&&(s?(r.unshift("line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;",i),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{s?o?console[n](`${e} %o`,...r):console[n](e,...r):console[n](e)}catch{}}B.logLevel="VERBOSE";const N=B.bind(window,!1);B.bind(window,!0);function M(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function O(t){return"function"===M(t)||"asyncfunction"===M(t)}function P(t){return"object"===M(t)}function _(t){return"string"===M(t)}function H(t){return"number"===M(t)}function R(t){return"undefined"===M(t)}function D(t){return!t||0===Object.keys(t).length&&t.constructor===Object}async function F(t,e=()=>{},n=()=>{}){return t.reduce((async(t,o)=>(await t,async function(t,e,n){try{await t.function(t.data),await e(R(t.data)?{}:t.data)}catch{n(R(t.data)?{}:t.data)}}(o,e,n))),Promise.resolve())}function j(t){return Array.prototype.slice.call(t)}function U(t,e){return function(){const n=this,o=arguments;window.setTimeout((()=>t.apply(n,o)),e)}}function V(t){return t[0].toUpperCase()+t.slice(1)}function z(t,...e){if(!e.length)return t;const n=e.shift();if(P(t)&&P(n))for(const e in n)P(n[e])?(t[e]||Object.assign(t,{[e]:{}}),z(t[e],n[e])):Object.assign(t,{[e]:n[e]});return z(t,...e)}function K(t){const e=function(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find((t=>-1!==window.navigator.appVersion.toLowerCase().indexOf(t)));return e&&(t[e]=!0),t}();return t=t.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),t=e.mac?t.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")}function $(t,e,n){const o=n.value?"value":"get",i=n[o],s=`#${e}Cache`;if(n[o]=function(...t){return void 0===this[s]&&(this[s]=i.apply(this,...t)),this[s]},"get"===o&&n.set){const e=n.set;n.set=function(n){delete t[s],e.apply(this,n)}}return n}function W(){return window.matchMedia("(max-width: 650px)").matches}const q=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);class G{static isSingleTag(t){return t.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}static isLineBreakTag(t){return t&&t.tagName&&["BR","WBR"].includes(t.tagName)}static make(t,e=null,n={}){const o=document.createElement(t);if(Array.isArray(e)){const t=e.filter((t=>void 0!==t));o.classList.add(...t)}else e&&o.classList.add(e);for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t]);return o}static text(t){return document.createTextNode(t)}static append(t,e){Array.isArray(e)?e.forEach((e=>t.appendChild(e))):t.appendChild(e)}static prepend(t,e){Array.isArray(e)?(e=e.reverse()).forEach((e=>t.prepend(e))):t.prepend(e)}static swap(t,e){const n=document.createElement("div"),o=t.parentNode;o.insertBefore(n,t),o.insertBefore(t,e),o.insertBefore(e,n),o.removeChild(n)}static find(t=document,e){return t.querySelector(e)}static get(t){return document.getElementById(t)}static findAll(t=document,e){return t.querySelectorAll(e)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map((t=>`input[type="${t}"]`)).join(", ")}static findAllInputs(t){return j(t.querySelectorAll(G.allInputsSelector)).reduce(((t,e)=>G.isNativeInput(e)||G.containsOnlyInlineElements(e)?[...t,e]:[...t,...G.getDeepestBlockElements(e)]),[])}static getDeepestNode(t,e=!1){const n=e?"lastChild":"firstChild",o=e?"previousSibling":"nextSibling";if(t&&t.nodeType===Node.ELEMENT_NODE&&t[n]){let i=t[n];if(G.isSingleTag(i)&&!G.isNativeInput(i)&&!G.isLineBreakTag(i))if(i[o])i=i[o];else{if(!i.parentNode[o])return i.parentNode;i=i.parentNode[o]}return this.getDeepestNode(i,e)}return t}static isElement(t){return!H(t)&&(t&&t.nodeType&&t.nodeType===Node.ELEMENT_NODE)}static isFragment(t){return!H(t)&&(t&&t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)}static isContentEditable(t){return"true"===t.contentEditable}static isNativeInput(t){return!(!t||!t.tagName)&&["INPUT","TEXTAREA"].includes(t.tagName)}static canSetCaret(t){let e=!0;if(G.isNativeInput(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1}else e=G.isContentEditable(t);return e}static isNodeEmpty(t,e){let n;return!(this.isSingleTag(t)&&!this.isLineBreakTag(t))&&(n=this.isElement(t)&&this.isNativeInput(t)?t.value:t.textContent.replace("​",""),e&&(n=n.replace(new RegExp(e,"g"),"")),0===n.trim().length)}static isLeaf(t){return!!t&&0===t.childNodes.length}static isEmpty(t,e){const n=[t];for(;n.length>0;)if(t=n.shift()){if(this.isLeaf(t)&&!this.isNodeEmpty(t,e))return!1;t.childNodes&&n.push(...Array.from(t.childNodes))}return!0}static isHTMLString(t){const e=G.make("div");return e.innerHTML=t,e.childElementCount>0}static getContentLength(t){return G.isNativeInput(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:t.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(t){let e;_(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;const n=t=>!G.blockElements.includes(t.tagName.toLowerCase())&&Array.from(t.children).every(n);return Array.from(e.children).every(n)}static getDeepestBlockElements(t){return G.containsOnlyInlineElements(t)?[t]:Array.from(t.children).reduce(((t,e)=>[...t,...G.getDeepestBlockElements(e)]),[])}static getHolder(t){return _(t)?document.getElementById(t):t}static isAnchor(t){return"a"===t.tagName.toLowerCase()}static offset(t){const e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=e.top+o,s=e.left+n;return{top:i,left:s,bottom:i+e.height,right:s+e.width}}}const X={ui:{blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},toolNames:{Text:"",Link:"",Bold:"",Italic:""},tools:{link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},blockTunes:{delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}}},Y=class t{static ui(e,n){return t._t(e,n)}static t(e,n){return t._t(e,n)}static setDictionary(e){t.currentDictionary=e}static _t(e,n){const o=t.getNamespace(e);return o&&o[n]?o[n]:n}static getNamespace(e){return e.split(".").reduce(((t,e)=>t&&Object.keys(t).length?t[e]:{}),t.currentDictionary)}};Y.currentDictionary=X;let J=Y;Error;class Q{constructor(){this.subscribers={}}on(t,e){t in this.subscribers||(this.subscribers[t]=[]),this.subscribers[t].push(e)}once(t,e){t in this.subscribers||(this.subscribers[t]=[]);const n=o=>{const i=e(o),s=this.subscribers[t].indexOf(n);return-1!==s&&this.subscribers[t].splice(s,1),i};this.subscribers[t].push(n)}emit(t,e){D(this.subscribers)||!this.subscribers[t]||this.subscribers[t].reduce(((t,e)=>{const n=e(t);return void 0!==n?n:t}),e)}off(t,e){if(void 0!==this.subscribers[t]){for(let n=0;n<this.subscribers[t].length;n++)if(this.subscribers[t][n]===e){delete this.subscribers[t][n];break}}else console.warn(`EventDispatcher .off(): there is no subscribers for event "${t.toString()}". Probably, .off() called before .on()`)}destroy(){this.subscribers={}}}class Z{constructor(){this.allListeners=[]}on(t,e,n,o=!1){const i=function(t=""){return`${t}${Math.floor(1e8*Math.random()).toString(16)}`}("l"),s={id:i,element:t,eventType:e,handler:n,options:o};if(!this.findOne(t,e,n))return this.allListeners.push(s),t.addEventListener(e,n,o),i}off(t,e,n,o){const i=this.findAll(t,e,n);i.forEach(((t,e)=>{const n=this.allListeners.indexOf(i[e]);n>-1&&(this.allListeners.splice(n,1),t.element.removeEventListener(t.eventType,t.handler,t.options))}))}offById(t){const e=this.findById(t);e&&e.element.removeEventListener(e.eventType,e.handler,e.options)}findOne(t,e,n){const o=this.findAll(t,e,n);return o.length>0?o[0]:null}findAll(t,e,n){let o;const i=t?this.findByEventTarget(t):[];return o=t&&e&&n?i.filter((t=>t.eventType===e&&t.handler===n)):t&&e?i.filter((t=>t.eventType===e)):i,o}removeAll(){this.allListeners.map((t=>{t.element.removeEventListener(t.eventType,t.handler,t.options)})),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(t){return this.allListeners.filter((e=>{if(e.element===t)return e}))}findByType(t){return this.allListeners.filter((e=>{if(e.eventType===t)return e}))}findByHandler(t){return this.allListeners.filter((e=>{if(e.handler===t)return e}))}findById(t){return this.allListeners.find((e=>e.id===t))}}class tt{constructor({config:t,eventsDispatcher:e}){if(this.nodes={},this.listeners=new Z,this.readOnlyMutableListeners={on:(t,e,n,o=!1)=>{this.mutableListenerIds.push(this.listeners.on(t,e,n,o))},clearAll:()=>{for(const t of this.mutableListenerIds)this.listeners.offById(t);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===tt)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=t,this.eventsDispatcher=e}set state(t){this.Editor=t}removeAllNodes(){for(const t in this.nodes){const e=this.nodes[t];e instanceof HTMLElement&&e.remove()}}get isRtl(){return"rtl"===this.config.i18n.direction}}class et{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const t=window.getSelection();return t?t.anchorNode:null}static get anchorElement(){const t=window.getSelection();if(!t)return null;const e=t.anchorNode;return e?G.isElement(e)?e:e.parentElement:null}static get anchorOffset(){const t=window.getSelection();return t?t.anchorOffset:null}static get isCollapsed(){const t=window.getSelection();return t?t.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(et.get())}static isSelectionAtEditor(t){if(!t)return!1;let e=t.anchorNode||t.focusNode;e&&e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);let n=null;return e&&e instanceof Element&&(n=e.closest(`.${et.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static isRangeAtEditor(t){if(!t)return;let e=t.startContainer;e&&e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);let n=null;return e&&e instanceof Element&&(n=e.closest(`.${et.CSS.editorZone}`)),!!n&&n.nodeType===Node.ELEMENT_NODE}static get isSelectionExists(){return!!et.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(t){return t&&t.rangeCount?t.getRangeAt(0):null}static get rect(){let t,e=document.selection,n={x:0,y:0,width:0,height:0};if(e&&"Control"!==e.type)return t=e.createRange(),n.x=t.boundingLeft,n.y=t.boundingTop,n.width=t.boundingWidth,n.height=t.boundingHeight,n;if(!window.getSelection)return N("Method window.getSelection is not supported","warn"),n;if(e=window.getSelection(),null===e.rangeCount||isNaN(e.rangeCount))return N("Method SelectionUtils.rangeCount is not supported","warn"),n;if(0===e.rangeCount)return n;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(n=t.getBoundingClientRect()),0===n.x&&0===n.y){const e=document.createElement("span");if(e.getBoundingClientRect){e.appendChild(document.createTextNode("​")),t.insertNode(e),n=e.getBoundingClientRect();const o=e.parentNode;o.removeChild(e),o.normalize()}}return n}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(t,e=0){const n=document.createRange(),o=window.getSelection();return G.isNativeInput(t)?G.canSetCaret(t)?(t.focus(),t.selectionStart=t.selectionEnd=e,t.getBoundingClientRect()):void 0:(n.setStart(t,e),n.setEnd(t,e),o.removeAllRanges(),o.addRange(n),n.getBoundingClientRect())}static isRangeInsideContainer(t){const e=et.range;return null!==e&&t.contains(e.startContainer)}static addFakeCursor(){const t=et.range;if(null===t)return;const e=G.make("span","codex-editor__fake-cursor");e.dataset.mutationFree="true",t.collapse(),t.insertNode(e)}static isFakeCursorInsideContainer(t){return null!==G.find(t,".codex-editor__fake-cursor")}static removeFakeCursor(t=document.body){const e=G.find(t,".codex-editor__fake-cursor");e&&e.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=et.range}restore(){if(!this.savedSelectionRange)return;const t=window.getSelection();t.removeAllRanges(),t.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const t=window.getSelection(),e=document.createRange();e.selectNodeContents(t.focusNode),e.collapse(!1),t.removeAllRanges(),t.addRange(e)}findParentTag(t,e,n=10){const o=window.getSelection();let i=null;return o&&o.anchorNode&&o.focusNode?([o.anchorNode,o.focusNode].forEach((o=>{let s=n;for(;s>0&&o.parentNode&&(o.tagName!==t||(i=o,e&&o.classList&&!o.classList.contains(e)&&(i=null),!i));)o=o.parentNode,s--})),i):null}expandToTag(t){const e=window.getSelection();e.removeAllRanges();const n=document.createRange();n.selectNodeContents(t),e.addRange(n)}}const nt="editor mobile layout toggled";function ot(t,e){if(!t.conversionConfig)return!1;const n=t.conversionConfig[e];return O(n)||_(n)}function it(t,e){return Object.entries(t).some((([t,n])=>e[t]&&function(t,e){const n=Array.isArray(t)||P(t),o=Array.isArray(e)||P(e);return n||o?JSON.stringify(t)===JSON.stringify(e):t===e}(e[t],n)))}async function st(t,e){const n=(await t.save()).data,o=e.find((e=>e.name===t.name));return void 0===o||ot(o,"export")?e.reduce(((e,o)=>{if(!ot(o,"import")||void 0===o.toolbox)return e;const i=o.toolbox.filter((e=>{if(D(e)||void 0===e.icon)return!1;if(void 0!==e.data){if(it(e.data,n))return!1}else if(o.name===t.name)return!1;return!0}));return e.push({...o,toolbox:i}),e}),[]):[]}var rt=(t=>(t.Default="default",t.Separator="separator",t.Html="html",t))(rt||{}),at=(t=>(t.APPEND_CALLBACK="appendCallback",t.RENDERED="rendered",t.MOVED="moved",t.UPDATED="updated",t.REMOVED="removed",t.ON_PASTE="onPaste",t))(at||{});var lt={exports:{}};!function(t){window,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){n(1),t.exports=function(){var t=n(6),e="cdx-notify--bounce-in",o=null;return{show:function(n){if(n.message){!function(){if(o)return!0;o=t.getWrapper(),document.body.appendChild(o)}();var i=null,s=n.time||8e3;switch(n.type){case"confirm":i=t.confirm(n);break;case"prompt":i=t.prompt(n);break;default:i=t.alert(n),window.setTimeout((function(){i.remove()}),s)}o.appendChild(i),i.classList.add(e)}}}}()},function(t,e,n){var o=n(2);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,i),o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:\'\';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:\'\';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,o=t[1]||"",i=t[3];if(!i)return o;if(e&&"function"==typeof btoa){var s=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),r=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[o].concat(r).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var s=this[i][0];"number"==typeof s&&(o[s]=!0)}for(i=0;i<t.length;i++){var r=t[i];"number"==typeof r[0]&&o[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){var o,i,s={},r=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),a=function(){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(t){return document.querySelector(t)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch{n=null}t[e]=n}return t[e]}}(),l=null,c=0,h=[],d=n(5);function u(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=s[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(b(o.parts[r],e))}else{var a=[];for(r=0;r<o.parts.length;r++)a.push(b(o.parts[r],e));s[o.id]={id:o.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],o={},i=0;i<t.length;i++){var s=t[i],r=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};o[r]?o[r].parts.push(a):n.push(o[r]={id:r,parts:[a]})}return n}function f(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=h[h.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),v(e,t.attrs),f(t,e),e}function v(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,o,i,s;if(e.transform&&t.css){if(!(s=e.transform(t.css)))return function(){};t.css=s}if(e.singleton){var r=c++;n=l||(l=m(e)),o=k.bind(null,n,r,!1),i=k.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),f(t,e),e}(e),o=function(t,e,n){var o=n.css,i=n.sourceMap,s=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||s)&&(o=d(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),o=function(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e){if(typeof DEBUG<"u"&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return u(n,e),function(t){for(var o=[],i=0;i<n.length;i++){var r=n[i];(a=s[r.id]).refs--,o.push(a)}for(t&&u(p(t,e),e),i=0;i<o.length;i++){var a;if(0===(a=o[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete s[a.id]}}}};var y,w=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function k(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var s=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}},function(t,e){t.exports=function(t){var e=typeof window<"u"&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:o+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e,n){var o,i,s,r,a,l,c,h,d;t.exports=(o="cdx-notifies",i="cdx-notify",s="cdx-notify__cross",r="cdx-notify__button--confirm",a="cdx-notify__button--cancel",l="cdx-notify__input",c="cdx-notify__button",h="cdx-notify__btns-wrapper",{alert:d=function(t){var e=document.createElement("DIV"),n=document.createElement("DIV"),o=t.message,r=t.style;return e.classList.add(i),r&&e.classList.add(i+"--"+r),e.innerHTML=o,n.classList.add(s),n.addEventListener("click",e.remove.bind(e)),e.appendChild(n),e},confirm:function(t){var e=d(t),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("button"),l=e.querySelector("."+s),u=t.cancelHandler,p=t.okHandler;return n.classList.add(h),o.innerHTML=t.okText||"Confirm",i.innerHTML=t.cancelText||"Cancel",o.classList.add(c),i.classList.add(c),o.classList.add(r),i.classList.add(a),u&&"function"==typeof u&&(i.addEventListener("click",u),l.addEventListener("click",u)),p&&"function"==typeof p&&o.addEventListener("click",p),o.addEventListener("click",e.remove.bind(e)),i.addEventListener("click",e.remove.bind(e)),n.appendChild(o),n.appendChild(i),e.appendChild(n),e},prompt:function(t){var e=d(t),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("input"),a=e.querySelector("."+s),u=t.cancelHandler,p=t.okHandler;return n.classList.add(h),o.innerHTML=t.okText||"Ok",o.classList.add(c),o.classList.add(r),i.classList.add(l),t.placeholder&&i.setAttribute("placeholder",t.placeholder),t.default&&(i.value=t.default),t.inputType&&(i.type=t.inputType),u&&"function"==typeof u&&a.addEventListener("click",u),p&&"function"==typeof p&&o.addEventListener("click",(function(){p(i.value)})),o.addEventListener("click",e.remove.bind(e)),n.appendChild(i),n.appendChild(o),e.appendChild(n),e},getWrapper:function(){var t=document.createElement("DIV");return t.classList.add(o),t}})}])}(lt);var ct={exports:{}};!function(t){t.exports=function(){function t(t){var e=t.tags,n=Object.keys(e).map((function(t){return typeof e[t]})).every((function(t){return"object"===t||"boolean"===t||"function"===t}));if(!n)throw new Error("The configuration was invalid");this.config=t}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(t){return-1!==e.indexOf(t.nodeName)}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(t){return-1!==o.indexOf(t.nodeName)}function s(t,e){return t.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function r(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function a(t,e){return typeof e>"u"||"boolean"==typeof e&&!e}function l(t,e,n){var o=t.name.toLowerCase();return!0!==e&&("function"==typeof e[o]?!e[o](t.value,n):typeof e[o]>"u"||!1===e[o]||"string"==typeof e[o]&&e[o]!==t.value)}return t.prototype.clean=function(t){const e=document.implementation.createHTMLDocument(),n=e.createElement("div");return n.innerHTML=t,this._sanitize(e,n),n.innerHTML},t.prototype._sanitize=function(t,e){var o=s(t,e),c=o.firstChild();if(c)do{if(c.nodeType!==Node.TEXT_NODE){if(c.nodeType===Node.COMMENT_NODE){e.removeChild(c),this._sanitize(t,e);break}var h,d=i(c);d&&(h=Array.prototype.some.call(c.childNodes,n));var u=!!e.parentNode,p=n(e)&&n(c)&&u,f=c.nodeName.toLowerCase(),g=r(this.config,f,c);if(d&&h||a(c,g)||!this.config.keepNestedBlockElements&&p){if("SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName)for(;c.childNodes.length>0;)e.insertBefore(c.childNodes[0],c);e.removeChild(c),this._sanitize(t,e);break}for(var m=0;m<c.attributes.length;m+=1){var v=c.attributes[m];l(v,g,c)&&(c.removeAttribute(v.name),m-=1)}this._sanitize(t,c)}else if(""===c.data.trim()&&(c.previousElementSibling&&n(c.previousElementSibling)||c.nextElementSibling&&n(c.nextElementSibling))){e.removeChild(c),this._sanitize(t,e);break}}while(c=o.nextSibling())},t}()}(ct);const ht=C(ct.exports);function dt(t,e){return t.map((t=>{const n=O(e)?e(t.tool):e;return D(n)||(t.data=pt(t.data,n)),t}))}function ut(t,e={}){return new ht({tags:e}).clean(t)}function pt(t,e){return Array.isArray(t)?function(t,e){return t.map((t=>pt(t,e)))}(t,e):P(t)?function(t,e){const n={};for(const o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;const i=t[o],s=ft(e[o])?e[o]:e;n[o]=pt(i,s)}return n}(t,e):_(t)?function(t,e){return P(e)?ut(t,e):!1===e?ut(t,{}):t}(t,e):t}function ft(t){return P(t)||function(t){return"boolean"===M(t)}(t)||O(t)}var gt={exports:{}};!function(t){window,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){n.r(e),n.d(e,"default",(function(){return o}));class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(t,e,n){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const o=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},n);if(o.hidingDelay&&(this.hidingDelay=o.hidingDelay),this.nodes.content.innerHTML="","string"==typeof e)this.nodes.content.appendChild(document.createTextNode(e));else{if(!(e instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof e+" given.");this.nodes.content.appendChild(e)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),o.placement){case"top":this.placeTop(t,o);break;case"left":this.placeLeft(t,o);break;case"right":this.placeRight(t,o);break;default:this.placeBottom(t,o)}o&&o.delay?this.showingTimeout=setTimeout((()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0}),o.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(t=!1){if(this.hidingDelay&&!t)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout((()=>{this.hide(!0)}),this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(t,e,n){t.addEventListener("mouseenter",(()=>{this.show(t,e,n)})),t.addEventListener("mouseleave",(()=>{this.hide()}))}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const t="codex-tooltips-style";if(document.getElementById(t))return;const e=n(2),o=this.make("style",null,{textContent:e.toString(),id:t});this.prepend(document.head,o)}placeBottom(t,e){const n=t.getBoundingClientRect(),o=n.left+t.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.bottom+window.pageYOffset+this.offsetTop+e.marginTop;this.applyPlacement("bottom",o,i)}placeTop(t,e){const n=t.getBoundingClientRect(),o=n.left+t.clientWidth/2-this.nodes.wrapper.offsetWidth/2,i=n.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",o,i)}placeLeft(t,e){const n=t.getBoundingClientRect(),o=n.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-e.marginLeft,i=n.top+window.pageYOffset+t.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",o,i)}placeRight(t,e){const n=t.getBoundingClientRect(),o=n.right+this.offsetRight+e.marginRight,i=n.top+window.pageYOffset+t.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",o,i)}applyPlacement(t,e,n){this.nodes.wrapper.classList.add(this.CSS.placement[t]),this.nodes.wrapper.style.left=e+"px",this.nodes.wrapper.style.top=n+"px"}make(t,e=null,n={}){const o=document.createElement(t);Array.isArray(e)?o.classList.add(...e):e&&o.classList.add(e);for(const t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o}append(t,e){Array.isArray(e)?e.forEach((e=>t.appendChild(e))):t.appendChild(e)}prepend(t,e){Array.isArray(e)?(e=e.reverse()).forEach((e=>t.prepend(e))):t.prepend(e)}}},function(t,e){t.exports='.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>\') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}'}]).default}(gt);const mt=C(gt.exports);let vt=null;function bt(){vt||(vt=new mt)}function yt(t=!1){bt(),null==vt||vt.hide(t)}function wt(t,e,n){bt(),null==vt||vt.onHover(t,e,n)}const kt=function t(e,n){const o={};return Object.entries(e).forEach((([e,i])=>{if(P(i)){const s=n?`${n}.${e}`:e;Object.values(i).every((t=>_(t)))?o[e]=s:o[e]=t(i,s)}else o[e]=i})),o}(X);const Ct=class t{constructor(t,e){this.cursor=-1,this.items=[],this.items=t||[],this.focusedCssClass=e}get currentItem(){return-1===this.cursor?null:this.items[this.cursor]}setCursor(t){t<this.items.length&&t>=-1&&(this.dropCursor(),this.cursor=t,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(t){this.items=t}next(){this.cursor=this.leafNodesAndReturnIndex(t.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(t.directions.LEFT)}dropCursor(){-1!==this.cursor&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(0===this.items.length)return this.cursor;let n=this.cursor;return-1===n?n=e===t.directions.RIGHT?-1:0:this.items[n].classList.remove(this.focusedCssClass),n=e===t.directions.RIGHT?(n+1)%this.items.length:(this.items.length+n-1)%this.items.length,G.canSetCaret(this.items[n])&&U((()=>et.setCursor(this.items[n])),50)(),this.items[n].classList.add(this.focusedCssClass),n}};Ct.directions={RIGHT:"right",LEFT:"left"};let xt=Ct;class Tt{constructor(t){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch(Tt.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case T:this.handleTabPress(t);break;case L:case S:this.flipLeft();break;case I:case A:this.flipRight();break;case E:this.handleEnterPress(t)}},this.iterator=new xt(t.items,t.focusedItemClass),this.activateCallback=t.activateCallback,this.allowedKeys=t.allowedKeys||Tt.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[T,L,I,E,S,A]}activate(t,e){this.activated=!0,t&&this.iterator.setItems(t),void 0!==e&&this.iterator.setCursor(e),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(t){this.flipCallbacks.push(t)}removeOnFlip(t){this.flipCallbacks=this.flipCallbacks.filter((e=>e!==t))}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(t){return this.activated&&this.allowedKeys.includes(t.keyCode)}handleTabPress(t){switch(t.shiftKey?xt.directions.LEFT:xt.directions.RIGHT){case xt.directions.RIGHT:this.flipRight();break;case xt.directions.LEFT:this.flipLeft()}}handleEnterPress(t){this.activated&&(this.iterator.currentItem&&(t.stopPropagation(),t.preventDefault(),this.iterator.currentItem.click()),O(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach((t=>t()))}}const Et='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Lt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>';function St(t){return(e,n)=>[[t,e].filter((t=>!!t)).join("__"),n].filter((t=>!!t)).join("--")}const At=St("ce-hint"),It={root:At(),alignedStart:At(null,"align-left"),alignedCenter:At(null,"align-center"),title:At("title"),description:At("description")};class Bt{constructor(t){this.nodes={root:G.make("div",[It.root,"center"===t.alignment?It.alignedCenter:It.alignedStart]),title:G.make("div",It.title,{textContent:t.title})},this.nodes.root.appendChild(this.nodes.title),void 0!==t.description&&(this.nodes.description=G.make("div",It.description,{textContent:t.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}class Nt{constructor(t){this.params=t}get name(){if(void 0!==this.params&&"name"in this.params)return this.params.name}destroy(){yt()}onChildrenOpen(){var t;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(t=this.params.children)?void 0:t.onOpen)&&this.params.children.onOpen()}onChildrenClose(){var t;void 0!==this.params&&"children"in this.params&&"function"==typeof(null==(t=this.params.children)?void 0:t.onClose)&&this.params.children.onClose()}handleClick(){var t,e;void 0!==this.params&&"onActivate"in this.params&&(null==(e=(t=this.params).onActivate)||e.call(t,this.params))}addHint(t,e){wt(t,new Bt(e).getElement(),{placement:e.position,hidingDelay:100})}get children(){var t;return void 0!==this.params&&"children"in this.params&&void 0!==(null==(t=this.params.children)?void 0:t.items)?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var t;return void 0!==this.params&&"children"in this.params&&!0===(null==(t=this.params.children)?void 0:t.isOpen)}get isChildrenFlippable(){var t;return!(void 0===this.params||!("children"in this.params)||!1===(null==(t=this.params.children)?void 0:t.isFlippable))}get isChildrenSearchable(){var t;return void 0!==this.params&&"children"in this.params&&!0===(null==(t=this.params.children)?void 0:t.searchable)}get closeOnActivate(){return void 0!==this.params&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return void 0!==this.params&&"isActive"in this.params&&("function"==typeof this.params.isActive?this.params.isActive():!0===this.params.isActive)}}const Mt=St("ce-popover-item"),Ot={container:Mt(),active:Mt(null,"active"),disabled:Mt(null,"disabled"),focused:Mt(null,"focused"),hidden:Mt(null,"hidden"),confirmationState:Mt(null,"confirmation"),noHover:Mt(null,"no-hover"),noFocus:Mt(null,"no-focus"),title:Mt("title"),secondaryTitle:Mt("secondary-title"),icon:Mt("icon"),iconTool:Mt("icon","tool"),iconChevronRight:Mt("icon","chevron-right"),wobbleAnimation:St("wobble")()};class Pt extends Nt{constructor(t,e){super(t),this.params=t,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var t;null==(t=this.nodes.root)||t.classList.remove(Ot.noFocus)},this.removeSpecialHoverBehavior=()=>{var t;null==(t=this.nodes.root)||t.classList.remove(Ot.noHover)},this.onErrorAnimationEnd=()=>{var t,e;null==(t=this.nodes.icon)||t.classList.remove(Ot.wobbleAnimation),null==(e=this.nodes.icon)||e.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(t,e)}get isDisabled(){return!0===this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return null!==this.confirmationState}get isFocused(){return null!==this.nodes.root&&this.nodes.root.classList.contains(Ot.focused)}getElement(){return this.nodes.root}handleClick(){this.isConfirmationStateEnabled&&null!==this.confirmationState?this.activateOrEnableConfirmationMode(this.confirmationState):this.activateOrEnableConfirmationMode(this.params)}toggleActive(t){var e;null==(e=this.nodes.root)||e.classList.toggle(Ot.active,t)}toggleHidden(t){var e;null==(e=this.nodes.root)||e.classList.toggle(Ot.hidden,t)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(t,e){var n,o;const i=(null==e?void 0:e.wrapperTag)||"div",s=G.make(i,Ot.container,{type:"button"===i?"button":void 0});return t.name&&(s.dataset.itemName=t.name),this.nodes.icon=G.make("div",[Ot.icon,Ot.iconTool],{innerHTML:t.icon||'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>'}),s.appendChild(this.nodes.icon),void 0!==t.title&&s.appendChild(G.make("div",Ot.title,{innerHTML:t.title||""})),t.secondaryLabel&&s.appendChild(G.make("div",Ot.secondaryTitle,{textContent:t.secondaryLabel})),this.hasChildren&&s.appendChild(G.make("div",[Ot.icon,Ot.iconChevronRight],{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>'})),this.isActive&&s.classList.add(Ot.active),t.isDisabled&&s.classList.add(Ot.disabled),void 0!==t.hint&&!1!==(null==(n=null==e?void 0:e.hint)?void 0:n.enabled)&&this.addHint(s,{...t.hint,position:(null==(o=null==e?void 0:e.hint)?void 0:o.position)||"right"}),s}enableConfirmationMode(t){if(null===this.nodes.root)return;const e={...this.params,...t,confirmation:"confirmation"in t?t.confirmation:void 0},n=this.make(e);this.nodes.root.innerHTML=n.innerHTML,this.nodes.root.classList.add(Ot.confirmationState),this.confirmationState=t,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(null===this.nodes.root)return;const t=this.make(this.params);this.nodes.root.innerHTML=t.innerHTML,this.nodes.root.classList.remove(Ot.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var t,e,n;null==(t=this.nodes.root)||t.classList.add(Ot.noHover),null==(e=this.nodes.root)||e.classList.add(Ot.noFocus),null==(n=this.nodes.root)||n.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var t;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),null==(t=this.nodes.root)||t.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(t){var e;if("confirmation"in t&&void 0!==t.confirmation)this.enableConfirmationMode(t.confirmation);else try{null==(e=t.onActivate)||e.call(t,t),this.disableConfirmationMode()}catch{this.animateError()}}animateError(){var t,e,n;null!=(t=this.nodes.icon)&&t.classList.contains(Ot.wobbleAnimation)||(null==(e=this.nodes.icon)||e.classList.add(Ot.wobbleAnimation),null==(n=this.nodes.icon)||n.addEventListener("animationend",this.onErrorAnimationEnd))}}const _t=St("ce-popover-item-separator"),Ht={container:_t(),line:_t("line"),hidden:_t(null,"hidden")};class Rt extends Nt{constructor(){super(),this.nodes={root:G.make("div",Ht.container),line:G.make("div",Ht.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(t){var e;null==(e=this.nodes.root)||e.classList.toggle(Ht.hidden,t)}}var Dt=(t=>(t.Closed="closed",t.ClosedOnActivate="closed-on-activate",t))(Dt||{});const Ft=St("ce-popover"),jt={popover:Ft(),popoverContainer:Ft("container"),popoverOpenTop:Ft(null,"open-top"),popoverOpenLeft:Ft(null,"open-left"),popoverOpened:Ft(null,"opened"),search:Ft("search"),nothingFoundMessage:Ft("nothing-found-message"),nothingFoundMessageDisplayed:Ft("nothing-found-message","displayed"),items:Ft("items"),overlay:Ft("overlay"),overlayHidden:Ft("overlay","hidden"),popoverNested:Ft(null,"nested"),getPopoverNestedClass:t=>Ft(null,`nested-level-${t.toString()}`),popoverInline:Ft(null,"inline"),popoverHeader:Ft("header")};var Ut=(t=>(t.NestingLevel="--nesting-level",t.PopoverHeight="--popover-height",t.InlinePopoverWidth="--inline-popover-width",t.TriggerItemLeft="--trigger-item-left",t.TriggerItemTop="--trigger-item-top",t))(Ut||{});const Vt=St("ce-popover-item-html"),zt={root:Vt(),hidden:Vt(null,"hidden")};class Kt extends Nt{constructor(t,e){var n,o;super(t),this.nodes={root:G.make("div",zt.root)},this.nodes.root.appendChild(t.element),t.name&&(this.nodes.root.dataset.itemName=t.name),void 0!==t.hint&&!1!==(null==(n=null==e?void 0:e.hint)?void 0:n.enabled)&&this.addHint(this.nodes.root,{...t.hint,position:(null==(o=null==e?void 0:e.hint)?void 0:o.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(t){var e;null==(e=this.nodes.root)||e.classList.toggle(zt.hidden,t)}getControls(){const t=this.nodes.root.querySelectorAll(`button, ${G.allInputsSelector}`);return Array.from(t)}}class $t extends Q{constructor(t,e={}){super(),this.params=t,this.itemsRenderParams=e,this.listeners=new Z,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(t.items),t.messages&&(this.messages={...this.messages,...t.messages}),this.nodes={},this.nodes.popoverContainer=G.make("div",[jt.popoverContainer]),this.nodes.nothingFoundMessage=G.make("div",[jt.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=G.make("div",[jt.items]),this.items.forEach((t=>{const e=t.getElement();null!==e&&this.nodes.items.appendChild(e)})),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",(t=>this.handleClick(t))),this.nodes.popover=G.make("div",[jt.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter((t=>t instanceof Pt))}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(jt.popoverOpened),void 0!==this.search&&this.search.focus()}hide(){this.nodes.popover.classList.remove(jt.popoverOpened),this.nodes.popover.classList.remove(jt.popoverOpenTop),this.itemsDefault.forEach((t=>t.reset())),void 0!==this.search&&this.search.clear(),this.emit(Dt.Closed)}destroy(){var t;this.items.forEach((t=>t.destroy())),this.nodes.popover.remove(),this.listeners.removeAll(),null==(t=this.search)||t.destroy()}activateItemByName(t){const e=this.items.find((e=>e.name===t));this.handleItemClick(e)}buildItems(t){return t.map((t=>{switch(t.type){case rt.Separator:return new Rt;case rt.Html:return new Kt(t,this.itemsRenderParams[rt.Html]);default:return new Pt(t,this.itemsRenderParams[rt.Default])}}))}getTargetItem(t){return this.items.filter((t=>t instanceof Pt||t instanceof Kt)).find((e=>{const n=e.getElement();return null!==n&&t.composedPath().includes(n)}))}handleItemClick(t){if(!("isDisabled"in t)||!t.isDisabled){if(t.hasChildren)return this.showNestedItems(t),void("handleClick"in t&&"function"==typeof t.handleClick&&t.handleClick());this.itemsDefault.filter((e=>e!==t)).forEach((t=>t.reset())),"handleClick"in t&&"function"==typeof t.handleClick&&t.handleClick(),this.toggleItemActivenessIfNeeded(t),t.closeOnActivate&&(this.hide(),this.emit(Dt.ClosedOnActivate))}}handleClick(t){const e=this.getTargetItem(t);void 0!==e&&this.handleItemClick(e)}toggleItemActivenessIfNeeded(t){if(t instanceof Pt&&(!0===t.toggle&&t.toggleActive(),"string"==typeof t.toggle)){const e=this.itemsDefault.filter((e=>e.toggle===t.toggle));if(1===e.length)return void t.toggleActive();e.forEach((e=>{e.toggleActive(e===t)}))}}}var Wt=(t=>(t.Search="search",t))(Wt||{});const qt=St("cdx-search-field"),Gt={wrapper:qt(),icon:qt("icon"),input:qt("input")};class Xt extends Q{constructor({items:t,placeholder:e}){super(),this.listeners=new Z,this.items=t,this.wrapper=G.make("div",Gt.wrapper);const n=G.make("div",Gt.icon,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'});this.input=G.make("input",Gt.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",(()=>{this.searchQuery=this.input.value,this.emit(Wt.Search,{query:this.searchQuery,items:this.foundItems})}))}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(Wt.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter((t=>this.checkItem(t)))}checkItem(t){var e,n;const o=(null==(e=t.title)?void 0:e.toLowerCase())||"",i=null==(n=this.searchQuery)?void 0:n.toLowerCase();return void 0!==i&&o.includes(i)}}var Yt=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor;const Qt=class t extends $t{constructor(t,e){super(t,e),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var t;super.hide(),this.destroyNestedPopoverIfExists(),null==(t=this.flipper)||t.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const t=this.itemsDefault.find((t=>t.isFocused));null==t||t.onFocus()},this.onSearch=t=>{var e;const n=""===t.query,o=0===t.items.length;this.items.forEach((e=>{let i=!1;e instanceof Pt?i=!t.items.includes(e):(e instanceof Rt||e instanceof Kt)&&(i=o||!n),e.toggleHidden(i)})),this.toggleNothingFoundMessage(o);const i=""===t.query?this.flippableElements:t.items.map((t=>t.getElement()));null!=(e=this.flipper)&&e.isActivated&&(this.flipper.deactivate(),this.flipper.activate(i))},void 0!==t.nestingLevel&&(this.nestingLevel=t.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(jt.popoverNested),void 0!==t.scopeElement&&(this.scopeElement=t.scopeElement),null!==this.nodes.popoverContainer&&this.listeners.on(this.nodes.popoverContainer,"mouseover",(t=>this.handleHover(t))),t.searchable&&this.addSearch(),!1!==t.flippable&&(this.flipper=new Tt({items:this.flippableElements,focusedItemClass:Ot.focused,allowedKeys:[T,S,A,E]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return void 0!==this.flipper&&this.flipper.hasFocus()}get scrollTop(){return null===this.nodes.items?0:this.nodes.items.scrollTop}get offsetTop(){return null===this.nodes.popoverContainer?0:this.nodes.popoverContainer.offsetTop}show(){var t;this.nodes.popover.style.setProperty(Ut.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(jt.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(jt.popoverOpenLeft),super.show(),null==(t=this.flipper)||t.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(t){null!==this.nestedPopover&&void 0!==this.nestedPopover||(this.nestedPopoverTriggerItem=t,this.showNestedPopoverForItem(t))}handleHover(t){const e=this.getTargetItem(t);void 0!==e&&this.previouslyHoveredItem!==e&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=e,e.hasChildren&&this.showNestedPopoverForItem(e))}setTriggerItemPosition(t,e){const n=e.getElement(),o=(n?n.offsetTop:0)-this.scrollTop,i=this.offsetTop+o;t.style.setProperty(Ut.TriggerItemTop,i+"px")}destroyNestedPopoverIfExists(){var t,e;void 0===this.nestedPopover||null===this.nestedPopover||(this.nestedPopover.off(Dt.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,null==(t=this.flipper)||t.activate(this.flippableElements),null==(e=this.nestedPopoverTriggerItem)||e.onChildrenClose())}showNestedPopoverForItem(e){var n;this.nestedPopover=new t({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(Dt.ClosedOnActivate,this.hide);const o=this.nestedPopover.getElement();return this.nodes.popover.appendChild(o),this.setTriggerItemPosition(o,e),o.style.setProperty(Ut.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),null==(n=this.flipper)||n.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const t=this.nodes.popoverContainer.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),n=this.size.height,o=t.top+n,i=t.top-n,s=Math.min(window.innerHeight,e.bottom);return i<e.top||o<=s}get shouldOpenRight(){if(void 0===this.nodes.popover||null===this.nodes.popover)return!1;const t=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),n=this.size.width,o=t.right+n,i=t.left-n,s=Math.min(window.innerWidth,e.right);return i<e.left||o<=s}get size(){var t;const e={height:0,width:0};if(null===this.nodes.popover)return e;const n=this.nodes.popover.cloneNode(!0);n.style.visibility="hidden",n.style.position="absolute",n.style.top="-1000px",n.classList.add(jt.popoverOpened),null==(t=n.querySelector("."+jt.popoverNested))||t.remove(),document.body.appendChild(n);const o=n.querySelector("."+jt.popoverContainer);return e.height=o.offsetHeight,e.width=o.offsetWidth,n.remove(),e}get flippableElements(){return this.items.map((t=>t instanceof Pt?t.getElement():t instanceof Kt?t.getControls():void 0)).flat().filter((t=>null!=t))}addSearch(){this.search=new Xt({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(Wt.Search,this.onSearch);const t=this.search.getElement();t.classList.add(jt.search),this.nodes.popoverContainer.insertBefore(t,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(t){this.nodes.nothingFoundMessage.classList.toggle(jt.nothingFoundMessageDisplayed,t)}};((t,e,n,o)=>{for(var i,s=o>1?void 0:o?Jt(e,n):e,r=t.length-1;r>=0;r--)(i=t[r])&&(s=(o?i(e,n,s):i(s))||s);o&&s&&Yt(e,n,s)})([$],Qt.prototype,"size",1);let Zt=Qt;const te=class t{constructor(){this.scrollPosition=null}lock(){q?this.lockHard():document.body.classList.add(t.CSS.scrollLocked)}unlock(){q?this.unlockHard():document.body.classList.remove(t.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(t.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(t.CSS.scrollLockedHard),null!==this.scrollPosition&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};te.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let ee=te;const ne=St("ce-popover-header"),oe={root:ne(),text:ne("text"),backButton:ne("back-button")};class ie{constructor({text:t,onBackButtonClick:e}){this.listeners=new Z,this.text=t,this.onBackButtonClick=e,this.nodes={root:G.make("div",[oe.root]),backButton:G.make("button",[oe.backButton]),text:G.make("div",[oe.text])},this.nodes.backButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class se{constructor(){this.history=[]}push(t){this.history.push(t)}pop(){return this.history.pop()}get currentTitle(){return 0===this.history.length?"":this.history[this.history.length-1].title}get currentItems(){return 0===this.history.length?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}class re extends $t{constructor(t){super(t,{[rt.Default]:{hint:{enabled:!1}},[rt.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new ee,this.history=new se,this.isHidden=!0,this.nodes.overlay=G.make("div",[jt.overlay,jt.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",(()=>{this.hide()})),this.history.push({items:t.items})}show(){this.nodes.overlay.classList.remove(jt.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(jt.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(t){this.updateItemsAndHeader(t.children,t.title),this.history.push({title:t.title,items:t.children})}updateItemsAndHeader(t,e){if(null!==this.header&&void 0!==this.header&&(this.header.destroy(),this.header=null),void 0!==e){this.header=new ie({text:e,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const t=this.header.getElement();null!==t&&this.nodes.popoverContainer.insertBefore(t,this.nodes.popoverContainer.firstChild)}this.items.forEach((t=>{var e;return null==(e=t.getElement())?void 0:e.remove()})),this.items=this.buildItems(t),this.items.forEach((t=>{var e;const n=t.getElement();null!==n&&(null==(e=this.nodes.items)||e.appendChild(n))}))}}var ae={exports:{}};!function(t){window,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.r(e);var s=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.commands={},this.keys={},this.name=e.name,this.parseShortcutName(e.name),this.element=e.on,this.callback=e.callback,this.executeShortcut=function(t){n.execute(t)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return i(t,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),i(t,[{key:"parseShortcutName",value:function(e){e=e.split("+");for(var n=0;n<e.length;n++){e[n]=e[n].toUpperCase();var o=!1;for(var i in t.supportedCommands)if(t.supportedCommands[i].includes(e[n])){o=this.commands[i]=!0;break}o||(this.keys[e[n]]=!0)}for(var s in t.supportedCommands)this.commands[s]||(this.commands[s]=!1)}},{key:"execute",value:function(e){var n,o={CMD:e.ctrlKey||e.metaKey,SHIFT:e.shiftKey,ALT:e.altKey},i=!0;for(n in this.commands)this.commands[n]!==o[n]&&(i=!1);var s,r=!0;for(s in this.keys)r=r&&e.keyCode===t.keyCodes[s];i&&r&&this.callback(e)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),t}();e.default=s}]).default}(ae);const le=C(ae.exports);const ce=new class{constructor(){this.registeredShortcuts=new Map}add(t){if(this.findShortcut(t.on,t.name))throw Error(`Shortcut ${t.name} is already registered for ${t.on}. Please remove it before add a new handler.`);const e=new le({name:t.name,on:t.on,callback:t.handler}),n=this.registeredShortcuts.get(t.on)||[];this.registeredShortcuts.set(t.on,[...n,e])}remove(t,e){const n=this.findShortcut(t,e);if(!n)return;n.remove();const o=this.registeredShortcuts.get(t);this.registeredShortcuts.set(t,o.filter((t=>t!==n)))}findShortcut(t,e){return(this.registeredShortcuts.get(t)||[]).find((({name:t})=>t===e))}};var he=Object.defineProperty,de=Object.getOwnPropertyDescriptor,ue=(t,e,n,o)=>{for(var i,s=o>1?void 0:o?de(e,n):e,r=t.length-1;r>=0;r--)(i=t[r])&&(s=(o?i(e,n,s):i(s))||s);return o&&s&&he(e,n,s),s};const pe=class t extends Q{constructor({api:e,tools:n,i18nLabels:o}){super(),this.opened=!1,this.listeners=new Z,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=n,this.i18nLabels=o,this.enableShortcuts(),this.nodes={toolbox:G.make("div",t.CSS.toolbox)},this.initPopover(),this.api.events.on(nt,this.handleMobileLayoutToggle)}get isEmpty(){return 0===this.toolsToBeDisplayed.length}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(null!==this.popover)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var t;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),null==(t=this.popover)||t.off(Dt.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(nt,this.handleMobileLayoutToggle)}toolButtonActivated(t,e){this.insertNewBlock(t,e)}open(){var t;this.isEmpty||(null==(t=this.popover)||t.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var t;null==(t=this.popover)||t.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var t;const e=W()?re:Zt;this.popover=new e({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Dt.Closed,this.onPopoverClose),null==(t=this.nodes.toolbox)||t.append(this.popover.getElement())}destroyPopover(){null!==this.popover&&(this.popover.hide(),this.popover.off(Dt.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),null!==this.nodes.toolbox&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const t=[];return this.tools.forEach((e=>{e.toolbox&&t.push(e)})),t}get toolboxItemsToBeDisplayed(){const t=(t,e)=>({icon:t.icon,title:J.t(kt.toolNames,t.title||V(e.name)),name:e.name,onActivate:()=>{this.toolButtonActivated(e.name,t.data)},secondaryLabel:e.shortcut?K(e.shortcut):""});return this.toolsToBeDisplayed.reduce(((e,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach((o=>{e.push(t(o,n))})):void 0!==n.toolbox&&e.push(t(n.toolbox,n)),e)),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach((t=>{const e=t.shortcut;e&&this.enableShortcutForTool(t.name,e)}))}enableShortcutForTool(t,e){ce.add({name:e,on:this.api.ui.nodes.redactor,handler:async e=>{e.preventDefault();const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(o)try{const e=await this.api.blocks.convert(o.id,t);return void this.api.caret.setToBlock(e,"end")}catch{}this.insertNewBlock(t)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach((t=>{const e=t.shortcut;e&&ce.remove(this.api.ui.nodes.redactor,e)}))}async insertNewBlock(t,e){const n=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(n);if(!o)return;const i=o.isEmpty?n:n+1;let s;if(e){const n=await this.api.blocks.composeBlockData(t);s=Object.assign(n,e)}const r=this.api.blocks.insert(t,s,void 0,i,void 0,o.isEmpty);r.call(at.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:r}),this.api.toolbar.close()}};ue([$],pe.prototype,"toolsToBeDisplayed",1),ue([$],pe.prototype,"toolboxItemsToBeDisplayed",1);var fe=(t=>(t[t.Block=0]="Block",t[t.Inline=1]="Inline",t[t.Tune=2]="Tune",t))(fe||{}),ge=(t=>(t.Shortcut="shortcut",t.Toolbox="toolbox",t.EnabledInlineTools="inlineToolbar",t.EnabledBlockTunes="tunes",t.Config="config",t))(ge||{}),me=(t=>(t.IsEnabledLineBreaks="enableLineBreaks",t.Toolbox="toolbox",t.ConversionConfig="conversionConfig",t.IsReadOnlySupported="isReadOnlySupported",t.PasteConfig="pasteConfig",t))(me||{}),ve=(t=>(t.IsInline="isInline",t.Title="title",t))(ve||{}),be=(t=>(t.IsTune="isTune",t))(be||{});class ye{constructor({name:t,constructable:e,config:n,api:o,isDefault:i,isInternal:s=!1,defaultPlaceholder:r}){this.api=o,this.name=t,this.constructable=e,this.config=n,this.isDefault=i,this.isInternal=s,this.defaultPlaceholder=r}get settings(){const t=this.config.config||{};return this.isDefault&&!("placeholder"in t)&&this.defaultPlaceholder&&(t.placeholder=this.defaultPlaceholder),t}reset(){if(O(this.constructable.reset))return this.constructable.reset()}prepare(){if(O(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const t=this.constructable.shortcut;return this.config.shortcut||t}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===fe.Inline}isBlock(){return this.type===fe.Block}isTune(){return this.type===fe.Tune}}const we=class t extends tt{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=t=>{try{const e=t.create({},{},!1);if(!1===t.pasteConfig)return void this.exceptionList.push(t.name);if(!O(e.onPaste))return;this.getTagsConfig(t),this.getFilesConfig(t),this.getPatternsConfig(t)}catch(e){N(`Paste handling for «${t.name}» Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async t=>{const{BlockManager:e,Toolbar:n}=this.Editor,o=e.setCurrentBlockByChildNode(t.target);!o||this.isNativeBehaviour(t.target)&&!t.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(t.preventDefault(),this.processDataTransfer(t.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(t){t?this.unsetCallback():this.setCallback()}async processDataTransfer(t,e=!1){const{Tools:n}=this.Editor,o=t.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!D(this.toolsFiles))return void await this.processFiles(t.files);const i=t.getData(this.MIME_TYPE),s=t.getData("text/plain");let r=t.getData("text/html");if(i)try{return void this.insertEditorJSData(JSON.parse(i))}catch{}e&&s.trim()&&r.trim()&&(r="<p>"+(r.trim()?r:s)+"</p>");const a=Object.keys(this.toolsTags).reduce(((t,e)=>(t[e.toLowerCase()]=this.toolsTags[e].sanitizationConfig??{},t)),{}),l=ut(r,Object.assign({},a,n.getAllInlineToolsSanitizeConfig(),{br:{}}));l.trim()&&l.trim()!==s&&G.isHTMLString(l)?await this.processText(l,!0):await this.processText(s)}async processText(t,e=!1){const{Caret:n,BlockManager:o}=this.Editor,i=e?this.processHTML(t):this.processPlain(t);if(!i.length)return;if(1===i.length)return void(i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop()));const s=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;i.map((async(t,e)=>this.insertBlock(t,0===e&&s))),o.currentBlock&&n.setToBlock(o.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const t=this.Editor.Tools.blockTools;Array.from(t.values()).forEach(this.processTool)}collectTagNames(t){return _(t)?[t]:P(t)?Object.keys(t):[]}getTagsConfig(t){if(!1===t.pasteConfig)return;const e=t.pasteConfig.tags||[],n=[];e.forEach((e=>{const o=this.collectTagNames(e);n.push(...o),o.forEach((n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n))return void N(`Paste handler for «${t.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,"warn");const o=P(e)?e[n]:null;this.toolsTags[n.toUpperCase()]={tool:t,sanitizationConfig:o}}))})),this.tagsByTool[t.name]=n.map((t=>t.toUpperCase()))}getFilesConfig(t){if(!1===t.pasteConfig)return;const{files:e={}}=t.pasteConfig;let{extensions:n,mimeTypes:o}=e;!n&&!o||(n&&!Array.isArray(n)&&(N(`«extensions» property of the onDrop config for «${t.name}» Tool should be an array`),n=[]),o&&!Array.isArray(o)&&(N(`«mimeTypes» property of the onDrop config for «${t.name}» Tool should be an array`),o=[]),o&&(o=o.filter((e=>!!function(t){return/^[-\w]+\/([-+\w]+|\*)$/.test(t)}(e)||(N(`MIME type value «${e}» for the «${t.name}» Tool is not a valid MIME type`,"warn"),!1)))),this.toolsFiles[t.name]={extensions:n||[],mimeTypes:o||[]})}getPatternsConfig(t){!1===t.pasteConfig||!t.pasteConfig.patterns||D(t.pasteConfig.patterns)||Object.entries(t.pasteConfig.patterns).forEach((([e,n])=>{n instanceof RegExp||N(`Pattern ${n} for «${t.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:n,tool:t})}))}isNativeBehaviour(t){return G.isNativeInput(t)}async processFiles(t){const{BlockManager:e}=this.Editor;let n;n=await Promise.all(Array.from(t).map((t=>this.processFile(t)))),n=n.filter((t=>!!t));const o=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;n.forEach(((t,n)=>{e.paste(t.type,t.event,0===n&&o)}))}async processFile(t){const e=function(t){return t.name.split(".").pop()}(t),n=Object.entries(this.toolsFiles).find((([n,{mimeTypes:o,extensions:i}])=>{const[s,r]=t.type.split("/"),a=i.find((t=>t.toLowerCase()===e.toLowerCase())),l=o.find((t=>{const[e,n]=t.split("/");return e===s&&(n===r||"*"===n)}));return!!a||!!l}));if(!n)return;const[o]=n;return{event:this.composePasteEvent("file",{file:t}),type:o}}processHTML(t){const{Tools:e}=this.Editor,n=G.make("DIV");return n.innerHTML=t,this.getNodes(n).map((t=>{let n,o=e.defaultTool,i=!1;switch(t.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=G.make("div"),n.appendChild(t);break;case Node.ELEMENT_NODE:n=t,i=!0,this.toolsTags[n.tagName]&&(o=this.toolsTags[n.tagName].tool)}const{tags:s}=o.pasteConfig||{tags:[]},r=s.reduce(((t,e)=>(this.collectTagNames(e).forEach((n=>{const o=P(e)?e[n]:null;t[n.toLowerCase()]=o||{}})),t)),{}),a=Object.assign({},r,o.baseSanitizeConfig);if("table"===n.tagName.toLowerCase()){const t=ut(n.outerHTML,a);n=G.make("div",void 0,{innerHTML:t}).firstChild}else n.innerHTML=ut(n.innerHTML,a);const l=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:i,tool:o.name,event:l}})).filter((t=>{const e=G.isEmpty(t.content),n=G.isSingleTag(t.content);return!e||n}))}processPlain(t){const{defaultBlock:e}=this.config;if(!t)return[];const n=e;return t.split(/\r?\n/).filter((t=>t.trim())).map((t=>{const e=G.make("div");e.textContent=t;const o=this.composePasteEvent("tag",{data:e});return{content:e,tool:n,isBlock:!1,event:o}}))}async processSingleBlock(t){const{Caret:e,BlockManager:n}=this.Editor,{currentBlock:o}=n;o&&t.tool===o.name&&G.containsOnlyInlineElements(t.content.innerHTML)?e.insertContentAtCaretPosition(t.content.innerHTML):this.insertBlock(t,(null==o?void 0:o.tool.isDefault)&&o.isEmpty)}async processInlinePaste(e){const{BlockManager:n,Caret:o}=this.Editor,{content:i}=e;if(n.currentBlock&&n.currentBlock.tool.isDefault&&i.textContent.length<t.PATTERN_PROCESSING_MAX_LENGTH){const t=await this.processPattern(i.textContent);if(t){const e=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty,i=n.paste(t.tool,t.event,e);return void o.setToBlock(i,o.positions.END)}}if(n.currentBlock&&n.currentBlock.currentInput){const t=n.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,ut(i.innerHTML,t))}else this.insertBlock(e)}async processPattern(t){const e=this.toolsPatterns.find((e=>{const n=e.pattern.exec(t);return!!n&&t===n.shift()}));return e?{event:this.composePasteEvent("pattern",{key:e.key,data:t}),tool:e.tool.name}:void 0}insertBlock(t,e=!1){const{BlockManager:n,Caret:o}=this.Editor,{currentBlock:i}=n;let s;if(e&&i&&i.isEmpty)return s=n.paste(t.tool,t.event,!0),void o.setToBlock(s,o.positions.END);s=n.paste(t.tool,t.event),o.setToBlock(s,o.positions.END)}insertEditorJSData(t){const{BlockManager:e,Caret:n,Tools:o}=this.Editor;dt(t,(t=>o.blockTools.get(t).sanitizeConfig)).forEach((({tool:t,data:o},i)=>{let s=!1;0===i&&(s=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const r=e.insert({tool:t,data:o,replace:s});n.setToBlock(r,n.positions.END)}))}processElementNode(t,e,n){const o=Object.keys(this.toolsTags),i=t,{tool:s}=this.toolsTags[i.tagName]||{},r=this.tagsByTool[null==s?void 0:s.name]||[],a=o.includes(i.tagName),l=G.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some((({tagName:t})=>o.includes(t)&&!r.includes(t))),h=Array.from(i.children).some((({tagName:t})=>G.blockElements.includes(t.toLowerCase())));return l||a||c?a&&!c||l&&!h&&!c?[...e,n,i]:void 0:(n.appendChild(i),[...e,n])}getNodes(t){const e=Array.from(t.childNodes);let n;const o=(t,e)=>{if(G.isEmpty(e)&&!G.isSingleTag(e))return t;const i=t[t.length-1];let s=new DocumentFragment;switch(i&&G.isFragment(i)&&(s=t.pop()),e.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(e,t,s),n)return n;break;case Node.TEXT_NODE:return s.appendChild(e),[...t,s];default:return[...t,s]}return[...t,...Array.from(e.childNodes).reduce(o,[])]};return e.reduce(o,[])}composePasteEvent(t,e){return new CustomEvent(t,{detail:e})}};we.PATTERN_PROCESSING_MAX_LENGTH=450;!function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(t)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();class ke{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:e,api:n,readOnly:o}){this.api=n,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=e.placeholder?e.placeholder:ke.DEFAULT_PLACEHOLDER,this._data=t??{},this._element=null,this._preserveBlank=e.preserveBlank??!1}onKeyUp(t){if("Backspace"!==t.code&&"Delete"!==t.code||!this._element)return;const{textContent:e}=this._element;""===e&&(this._element.innerHTML="")}drawView(){const t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t.contentEditable="false",t.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(t.innerHTML=this._data.text),this.readOnly||(t.contentEditable="true",t.addEventListener("keyup",this.onKeyUp)),t}render(){return this._element=this.drawView(),this._element}merge(t){if(!this._element)return;this._data.text+=t.text;const e=function(t){const e=document.createElement("div");e.innerHTML=t.trim();const n=document.createDocumentFragment();return n.append(...Array.from(e.childNodes)),n}(t.text);this._element.appendChild(e),this._element.normalize()}validate(t){return!(""===t.text.trim()&&!this._preserveBlank)}save(t){return{text:t.innerHTML}}onPaste(t){const e={text:t.detail.data.innerHTML};this._data=e,window.requestAnimationFrame((()=>{this._element&&(this._element.innerHTML=this._data.text||"")}))}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}class Ce{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}Ce.isInline=!0,Ce.title="Bold";class xe{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t}get shortcut(){return"CMD+I"}}xe.isInline=!0,xe.title="Italic";class Te{constructor({api:t}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=t.toolbar,this.inlineToolbar=t.inlineToolbar,this.notifier=t.notifier,this.i18n=t.i18n,this.selection=new et}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Et,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",(t=>{t.keyCode===this.ENTER_KEY&&this.enterPressed(t)})),this.nodes.input}surround(t){if(t){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t)return this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}checkState(){const t=this.selection.findParentTag("A");if(t){this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const e=t.getAttribute("href");this.nodes.input.value="null"!==e?e:"",this.selection.save()}else this.nodes.button.innerHTML=Et,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!t}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(t=!1){this.nodes.input.classList.add(this.CSS.inputShowed),t&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(t=!0){if(this.selection.isFakeBackgroundEnabled){const t=new et;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",t&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(t){let e=this.nodes.input.value||"";return e.trim()?this.validateURL(e)?(e=this.prepareLink(e),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(e),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void N("Incorrect Link pasted","warn",e)):(this.selection.restore(),this.unlink(),t.preventDefault(),void this.closeActions())}validateURL(t){return!/\s/.test(t)}prepareLink(t){return t=t.trim(),t=this.addProtocol(t)}addProtocol(t){if(/^(\w+):(\/\/)?/.test(t))return t;const e=/^\/[^/\s]/.test(t),n="#"===t.substring(0,1),o=/^\/\/[^/\s]/.test(t);return!e&&!n&&!o&&(t="http://"+t),t}insertLink(t){const e=this.selection.findParentTag("A");e&&this.selection.expandToTag(e),document.execCommand(this.commandLink,!1,t)}unlink(){document.execCommand(this.commandUnlink)}}Te.isInline=!0,Te.title="Link";class Ee{constructor({api:t}){this.i18nAPI=t.i18n,this.blocksAPI=t.blocks,this.selectionAPI=t.selection,this.toolsAPI=t.tools,this.caretAPI=t.caret}async render(){const t=et.get(),e=this.blocksAPI.getBlockByElement(t.anchorNode);if(void 0===e)return[];const n=this.toolsAPI.getBlockTools(),o=await st(e,n);if(0===o.length)return[];const i=o.reduce(((t,n)=>{var o;return null==(o=n.toolbox)||o.forEach((o=>{t.push({icon:o.icon,title:J.t(kt.toolNames,o.title),name:n.name,closeOnActivate:!0,onActivate:async()=>{const t=await this.blocksAPI.convert(e.id,n.name,o.data);this.caretAPI.setToBlock(t,"end")}})})),t}),[]),s=await e.getActiveToolboxEntry(),r=void 0!==s?s.icon:Lt,a=!W();return{icon:r,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:a,items:i,onOpen:()=>{a&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{a&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}}Ee.isInline=!0;class Le{constructor({data:t,api:e}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=e,this.title=t.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=t.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const t=G.make("div",this.CSS.wrapper),e=G.make("div",this.CSS.info),n=G.make("div",this.CSS.title,{textContent:this.title}),o=G.make("div",this.CSS.subtitle,{textContent:this.subtitle});return t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',e.appendChild(n),e.appendChild(o),t.appendChild(e),t}}Le.isReadOnlySupported=!0;class Se extends ye{constructor(){super(...arguments),this.type=fe.Inline}get title(){return this.constructable[ve.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}}class Ae extends ye{constructor(){super(...arguments),this.type=fe.Tune}create(t,e){return new this.constructable({api:this.api,config:this.settings,block:e,data:t})}}class Ie extends Map{get blockTools(){const t=Array.from(this.entries()).filter((([,t])=>t.isBlock()));return new Ie(t)}get inlineTools(){const t=Array.from(this.entries()).filter((([,t])=>t.isInline()));return new Ie(t)}get blockTunes(){const t=Array.from(this.entries()).filter((([,t])=>t.isTune()));return new Ie(t)}get internalTools(){const t=Array.from(this.entries()).filter((([,t])=>t.isInternal));return new Ie(t)}get externalTools(){const t=Array.from(this.entries()).filter((([,t])=>!t.isInternal));return new Ie(t)}}var Be=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Me=(t,e,n,o)=>{for(var i,s=o>1?void 0:o?Ne(e,n):e,r=t.length-1;r>=0;r--)(i=t[r])&&(s=(o?i(e,n,s):i(s))||s);return o&&s&&Be(e,n,s),s};class Oe extends ye{constructor(){super(...arguments),this.type=fe.Block,this.inlineTools=new Ie,this.tunes=new Ie}create(t,e,n){return new this.constructable({data:t,block:e,readOnly:n,api:this.api,config:this.settings})}get isReadOnlySupported(){return!0===this.constructable[me.IsReadOnlySupported]}get isLineBreaksEnabled(){return this.constructable[me.IsEnabledLineBreaks]}get toolbox(){const t=this.constructable[me.Toolbox],e=this.config[ge.Toolbox];if(!D(t)&&!1!==e)return e?Array.isArray(t)?Array.isArray(e)?e.map(((e,n)=>{const o=t[n];return o?{...o,...e}:e})):[e]:Array.isArray(e)?e:[{...t,...e}]:Array.isArray(t)?t:[t]}get conversionConfig(){return this.constructable[me.ConversionConfig]}get enabledInlineTools(){return this.config[ge.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[ge.EnabledBlockTunes]}get pasteConfig(){return this.constructable[me.PasteConfig]??{}}get sanitizeConfig(){const t=super.sanitizeConfig,e=this.baseSanitizeConfig;if(D(t))return e;const n={};for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const i=t[o];P(i)?n[o]=Object.assign({},e,i):n[o]=i}return n}get baseSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach((e=>Object.assign(t,e.sanitizeConfig))),Array.from(this.tunes.values()).forEach((e=>Object.assign(t,e.sanitizeConfig))),t}}Me([$],Oe.prototype,"sanitizeConfig",1),Me([$],Oe.prototype,"baseSanitizeConfig",1);class Pe{constructor(t,e,n){this.api=n,this.config=t,this.editorConfig=e}get(t){const{class:e,isInternal:n=!1,...o}=this.config[t],i=this.getConstructor(e),s=e[be.IsTune];return new i({name:t,constructable:e,config:o,api:this.api.getMethodsForTool(t,s),isDefault:t===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:n})}getConstructor(t){switch(!0){case t[ve.IsInline]:return Se;case t[be.IsTune]:return Ae;default:return Oe}}}class _e{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),e=this.api.blocks.getBlockByIndex(t+1);if(!e)throw new Error("Unable to move Block down since it is already the last");const n=e.holder,o=n.getBoundingClientRect();let i=Math.abs(window.innerHeight-n.offsetHeight);o.top<window.innerHeight&&(i=window.scrollY+n.offsetHeight),window.scrollTo(0,i),this.api.blocks.move(t+1),this.api.toolbar.toggleBlockSettings(!0)}}_e.isTune=!0;class He{constructor({api:t}){this.api=t}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}He.isTune=!0;class Re{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),e=this.api.blocks.getBlockByIndex(t),n=this.api.blocks.getBlockByIndex(t-1);if(0===t||!e||!n)throw new Error("Unable to move Block up since it is already the first");const o=e.holder,i=n.holder,s=o.getBoundingClientRect(),r=i.getBoundingClientRect();let a;a=r.top>0?Math.abs(s.top)-Math.abs(r.top):Math.abs(s.top)+r.height,window.scrollBy(0,-1*a),this.api.blocks.move(t-1),this.api.toolbar.toggleBlockSettings(!0)}}Re.isTune=!0;var De=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor;class je extends tt{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new Ie,this.toolsUnavailable=new Ie}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=z({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||0===Object.keys(this.config.tools).length)throw Error("Can't start without tools");const t=this.prepareConfig();this.factory=new Pe(t,this.config,this.Editor.API);const e=this.getListOfPrepareFunctions(t);if(0===e.length)return Promise.resolve();await F(e,(t=>{this.toolPrepareMethodSuccess(t)}),(t=>{this.toolPrepareMethodFallback(t)})),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach((e=>{Object.assign(t,e.sanitizeConfig)})),t}destroy(){Object.values(this.available).forEach((async t=>{O(t.reset)&&await t.reset()}))}get internalTools(){return{convertTo:{class:Ee,isInternal:!0},link:{class:Te,isInternal:!0},bold:{class:Ce,isInternal:!0},italic:{class:xe,isInternal:!0},paragraph:{class:ke,inlineToolbar:!0,isInternal:!0},stub:{class:Le,isInternal:!0},moveUp:{class:Re,isInternal:!0},delete:{class:He,isInternal:!0},moveDown:{class:_e,isInternal:!0}}}toolPrepareMethodSuccess(t){const e=this.factory.get(t.toolName);if(e.isInline()){const t=["render"].filter((t=>!e.create()[t]));if(t.length)return N(`Incorrect Inline Tool: ${e.name}. Some of required methods is not implemented %o`,"warn",t),void this.toolsUnavailable.set(e.name,e)}this.toolsAvailable.set(e.name,e)}toolPrepareMethodFallback(t){this.toolsUnavailable.set(t.toolName,this.factory.get(t.toolName))}getListOfPrepareFunctions(t){const e=[];return Object.entries(t).forEach((([t,n])=>{e.push({function:O(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:t,config:n.config}})})),e}prepareBlockTools(){Array.from(this.blockTools.values()).forEach((t=>{this.assignInlineToolsToBlockTool(t),this.assignBlockTunesToBlockTool(t)}))}assignInlineToolsToBlockTool(t){if(!1!==this.config.inlineToolbar){if(!0===t.enabledInlineTools)return void(t.inlineTools=new Ie(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map((t=>[t,this.inlineTools.get(t)])):Array.from(this.inlineTools.entries())));Array.isArray(t.enabledInlineTools)&&(t.inlineTools=new Ie(["convertTo",...t.enabledInlineTools].map((t=>[t,this.inlineTools.get(t)]))))}}assignBlockTunesToBlockTool(t){if(!1!==t.enabledBlockTunes){if(Array.isArray(t.enabledBlockTunes)){const e=new Ie(t.enabledBlockTunes.map((t=>[t,this.blockTunes.get(t)])));return void(t.tunes=new Ie([...e,...this.blockTunes.internalTools]))}if(Array.isArray(this.config.tunes)){const e=new Ie(this.config.tunes.map((t=>[t,this.blockTunes.get(t)])));return void(t.tunes=new Ie([...e,...this.blockTunes.internalTools]))}t.tunes=this.blockTunes.internalTools}}validateTools(){for(const t in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,t)){if(t in this.internalTools)return;const e=this.config.tools[t];if(!O(e)&&!O(e.class))throw Error(`Tool «${t}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const t={};for(const e in this.config.tools)P(this.config.tools[e])?t[e]=this.config.tools[e]:t[e]={class:this.config.tools[e]};return t}}((t,e,n,o)=>{for(var i,s=o>1?void 0:o?Fe(e,n):e,r=t.length-1;r>=0;r--)(i=t[r])&&(s=(o?i(e,n,s):i(s))||s);o&&s&&De(e,n,s)})([$],je.prototype,"getAllInlineToolsSanitizeConfig",1);function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Ve(){Ve=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function h(t,e,n,o){var s=e&&e.prototype instanceof v?e:v,r=Object.create(s.prototype),a=new B(o||[]);return i(r,"_invoke",{value:L(t,n,a)}),r}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function v(){}function b(){}function y(){}var w={};c(w,r,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(N([])));C&&C!==n&&o.call(C,r)&&(w=C);var x=y.prototype=v.prototype=Object.create(w);function T(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,s,r,a){var l=d(t[i],t,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Ue(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,r,a)}),(function(t){n("throw",t,r,a)})):e.resolve(h).then((function(t){c.value=t,r(c)}),(function(t){return n("throw",t,r,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,i){n(t,o,e,i)}))}return s=s?s.then(i,i):i()}})}function L(e,n,o){var i=u;return function(s,r){if(i===f)throw Error("Generator is already running");if(i===g){if("throw"===s)throw r;return{value:t,done:!0}}for(o.method=s,o.arg=r;;){var a=o.delegate;if(a){var l=S(a,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===u)throw i=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=f;var c=d(e,n,o);if("normal"===c.type){if(i=o.done?g:p,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=g,o.method="throw",o.arg=c.arg)}}}function S(e,n){var o=n.method,i=e.iterator[o];if(i===t)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var s=d(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var r=s.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(Ue(e)+" is not iterable")}return b.prototype=y,i(x,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},T(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,o,i,s){void 0===s&&(s=Promise);var r=new E(h(t,n,o,i),s);return e.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},T(x),c(x,l,"Generator"),c(x,r,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=N,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(o,i){return a.type="throw",a.arg=e,n.next=o,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=t,r.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:N(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),m}},e}function ze(t,e,n,o,i,s,r){try{var a=t[s](r),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,i)}function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,s,r,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=s.call(n)).done)&&(a.push(o.value),a.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return $e(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function We(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Ge(o.key),o)}}function qe(t,e,n){return(e=Ge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ge(t){var e=function(t,e){if("object"!=Ue(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=Ue(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ue(e)?e:e+""}var Xe=function(){return function(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var n=e.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,"api",void 0),qe(this,"availableDesign",{bouton:"link-btn",discret:"ninja"}),qe(this,"nodes",{wrapper:null,input:null,selectDesign:null,hideForBot:null,targetBlank:null,button:null,linkButton:null,unlinkButton:null}),qe(this,"inputOpened",!1),qe(this,"anchorTag",null),qe(this,"selection",void 0),this.api=n,this.selection=new b}),[{key:"render",value:function(){return console.log("render"),this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.api.styles.inlineToolButton),this.nodes.button.innerHTML=w,this.nodes.button}},{key:"renderActions",value:function(){var t,e=this;console.log("renderActions",this.nodes.input),this.nodes.input=y.A.element("input",this.api.styles.input,{placeholder:"https://..."}),this.nodes.suggester=y.A.element("div","textSuggester",{style:"display:none"});new k.Local(this.nodes.input,this.nodes.suggester,null!==(t=window.pagesUriList)&&void 0!==t?t:[],{highlight:!0,dispMax:20,dispAllKey:!0}),this.nodes.hideForBot=y.A.switchInput("hideForBot",this.api.i18n.t("Obfusquer")),this.nodes.targetBlank=y.A.switchInput("targetBlank",this.api.i18n.t("Nouvel onglet")),this.nodes.selectDesign=y.A.element("select",this.api.styles.input),y.A.option(this.nodes.selectDesign,"",this.api.i18n.t("Style"),{style:"opacity: 0.5"});for(var n=0,o=Object.entries(this.availableDesign);n<o.length;n++){var i=Ke(o[n],2),s=i[0],r=i[1];y.A.option(this.nodes.selectDesign,r,s)}return this.nodes.wrapper=document.createElement("div"),this.nodes.wrapper.classList.add("link-options-wrapper"),this.nodes.wrapper.append(this.nodes.input,this.nodes.suggester,this.nodes.hideForBot,this.nodes.targetBlank,this.nodes.selectDesign),this.nodes.wrapper.addEventListener("change",(function(t){e.updateLink()})),this.nodes.wrapper.addEventListener("copy",function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function r(t){ze(s,o,i,r,a,"next",t)}function a(t){ze(s,o,i,r,a,"throw",t)}r(void 0)}))}}(Ve().mark((function t(n){var o;return Ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("copy",e.anchorTag),t.next=3,navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([null===(o=e.anchorTag)||void 0===o?void 0:o.outerHTML],{type:"text/html"}),"text/plain":new Blob([e.nodes.input.value],{type:"text/plain"})})]);case 3:n.preventDefault();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.nodes.input.addEventListener("keydown",(function(t){"Enter"===t.key&&(console.log("press ENTER"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.updateLink(),e.closeActions())})),console.log("/renderActions"),this.nodes.wrapper}},{key:"checkState",value:function(){var t=this;console.log("checkState");var e=this.anchorTag||this.api.selection.findParentTag("A");return e?(this.showUnlink(),this.anchorTag=e,this.openActions(),this.updateActionValues(e),setTimeout((function(){return t.nodes.input.focus()}),0),console.log("/checkState"),!0):(this.showUnlink(!1),!1)}},{key:"surround",value:function(t){if(console.log("surround",t,this.anchorTag),t){this.inputOpened&&(this.selection.restore(),this.selection.removeFakeBackground());var e=this.api.selection.findParentTag("A")||this.anchorTag;if(console.log(e,this.inputOpened),e)return this.unlink(e),void this.closeActions();console.log("create A"),this.anchorTag=document.createElement("A"),this.anchorTag.appendChild(t.extractContents()),t.insertNode(this.anchorTag),this.api.selection.expandToTag(this.anchorTag),this.selection.setFakeBackground(),this.selection.save(),this.openActions(!0)}else this.toggleActions()}},{key:"showUnlink",value:function(){var t,e;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])return null===(e=this.nodes.button)||void 0===e||e.classList.add(this.api.styles.inlineToolButtonActive),void(this.nodes.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>');this.nodes.button.innerHTML=w,null===(t=this.nodes.button)||void 0===t||t.classList.remove(this.api.styles.inlineToolButtonActive)}},{key:"updateActionValues",value:function(t){if(console.log("updateActionValues"),this.nodes.input){var e=t.getAttribute("href");this.nodes.input.value=e||"";var n=t.getAttribute("rel");this.nodes.hideForBot.querySelector("input").checked=!!n;var o=t.getAttribute("target");this.nodes.targetBlank.querySelector("input").checked=!!o;var i=t.getAttribute("class");this.nodes.selectDesign.value=i||"",console.log("/updateActionValues")}}},{key:"shortcut",get:function(){return"CMD+K"}},{key:"clear",value:function(){console.log("CLEAR"),this.anchorTag&&(this.anchorTag.style=""),this.selection.removeFakeBackground()}},{key:"toggleActions",value:function(){console.log("toggleActions",this.inputOpened),this.inputOpened?this.closeActions():this.openActions(!0)}},{key:"openActions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("openActions"),this.nodes.wrapper.style.display="block",this.anchorTag&&(this.api.selection.expandToTag(this.anchorTag),this.api.selection.setFakeBackground(),this.api.selection.save()),t&&this.nodes.input.focus(),this.inputOpened=!0}},{key:"closeActions",value:function(){(console.log("closeActions",this.selection.isFakeBackgroundEnabled),this.selection.isFakeBackgroundEnabled)&&((new b).save(),this.selection.restore(),this.selection.removeFakeBackground(),this.selection.collapseToEnd());(this.nodes.input.value||"").trim()||this.unlink(this.anchorTag),this.inputOpened=!1,this.api.inlineToolbar.close()}},{key:"updateLink",value:function(){var t=this.nodes.input.value.trim()||"";this.anchorTag.setAttribute("href",t);var e=this.nodes.targetBlank.querySelector("input").checked?"_blank":"";e?this.anchorTag.setAttribute("target",e):this.anchorTag.removeAttribute("target");var n=this.nodes.hideForBot.querySelector("input").checked?"obfuscate":"";n?this.anchorTag.setAttribute("rel",n):this.anchorTag.removeAttribute("rel");var o=this.nodes.selectDesign.value||"";return o?this.anchorTag.className=o:this.anchorTag.removeAttribute("class"),this.anchorTag}},{key:"unlink",value:function(t){var e;if(console.log("- unlink",t,this.anchorTag),t){this.api.selection.expandToTag(t);var n=window.getSelection();if(n){var o=n.getRangeAt(0);if(o){var i=o.extractContents();i&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t),o.insertNode(i),n.removeAllRanges(),o.collapse(),n.addRange(o),console.log("removed"))}}}}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{a:{href:!0,target:!0,rel:!0,class:!0}}}}])}();return qe(Xe,"isInline",!0),qe(Xe,"title","Link"),o=o.default})()));